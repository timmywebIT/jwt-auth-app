## üîê Jwt-auth

–ü—Ä–æ—Å—Ç–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å —Ñ–æ—Ä–º–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, —Ä–µ–∞–ª–∏–∑—É—é—â–µ–µ –±–∞–∑–æ–≤—É—é –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é —á–µ—Ä–µ–∑ JWT. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è, –ø–æ—Å–ª–µ —á–µ–≥–æ –ø–æ–ª—É—á–∞–µ—Ç —Ç–æ–∫–µ–Ω –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∑–∞—â–∏—â—ë–Ω–Ω—ã–º –º–∞—Ä—à—Ä—É—Ç–∞–º.

## üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ –¥–æ—Å—Ç—É–ø

| –ú–µ—Ç–æ–¥ | URL               | –û–ø–∏—Å–∞–Ω–∏–µ                      | Middleware         |
|-------|-------------------|-------------------------------|--------------------|
| POST  | /login            | –í—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è             | ‚Äî                  |
| POST  | /register         | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è      | ‚Äî                  |
| POST  | /logout           | –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã              | auth:api           |
| GET   | /admin/dashboard  | –î–æ—Å—Ç—É–ø –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞     | auth:api, role:admin |
| GET   | /user/dashboard   | –î–æ—Å—Ç—É–ø –¥–ª—è –æ–±—ã—á–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | auth:api, role:user |

‚úÖ JWT-—Ç–æ–∫–µ–Ω –≤—ã–¥–∞—ë—Ç—Å—è –ø—Ä–∏ –ª–æ–≥–∏–Ω–µ

‚úÖ –†–æ–ª–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —á–µ—Ä–µ–∑ middleware

‚úÖ –ó–∞—â–∏—Ç–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —è–≤–Ω–æ

–≠–Ω–¥–ø–æ–∏–Ω—Ç `POST /register` –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –ø–æ–ª—É—á–∏—Ç—å JWT-—Ç–æ–∫–µ–Ω –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.

### üì¶ –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ (Laravel)

```php
public function register(Request $request)
{
   $validate = $request->validate([
       'name' => 'required|string',
       'email' => 'required|email|unique:users',
       'password' => 'required|string'
   ]);

   $user = User::create([
       'name' => $validate['name'],
       'email' => $validate['email'],
       'password' => bcrypt($validate['password']),
       'role' => 'user'
   ]);

   $token = JWTAuth::fromUser($user);

   return response()->json([
       'token' => $token,
       'role' => $user->role
   ], 201);
}
```
## üì§ –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (Vue + Axios)

–ü—Ä–∏–º–µ—Ä –¥–µ–π—Å—Ç–≤–∏—è `createUser`, –æ—Ç–ø—Ä–∞–≤–ª—è—é—â–µ–≥–æ –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã –Ω–∞ API `/register`.

```js
actions: {
  async createUser() {
    try {
      await axios.post('http://127.0.0.1:8000/api/register', this.user);
      this.resetUser();
      showRegisterSuccess();
    } catch (err) {
      console.log(err);
    }
  }
}
```
